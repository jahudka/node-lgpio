<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](./index.md) &gt; [lgpio](./lgpio.md) &gt; [i2cZip](./lgpio.i2czip.md)

## i2cZip() function

This function executes a sequence of I2C operations. The operations to be performed are specified by the contents of txBuf which contains the concatenated command codes and associated data.

<b>Signature:</b>

```typescript
export declare function i2cZip(handle: number, txBuf: Uint8Array, rxBuf: Uint8Array): number;
```

## Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  handle | number | The I2C device handle as returned by [i2cOpen()](./lgpio.i2copen.md) |
|  txBuf | Uint8Array | The buffer containing the concatenated I2C commands |
|  rxBuf | Uint8Array | The buffer to receive the data read from the device |

<b>Returns:</b>

number

The number of bytes read from the device

## Remarks

The following command codes are supported:

<table> <thead> <tr> <th>Name</th> <th>Cmd &amp; Data</th> <th>Meaning</th> </tr> </thead> <tbody> <tr> <td>End</td> <td><code>0</code></td> <td>No more commands</td> </tr> <tr> <td>Escape</td> <td><code>1</code></td> <td>Next <code>P</code> is two bytes</td> </tr> <tr> <td>Address</td> <td><code>2 P</code></td> <td>Set I2C address to <code>P</code></td> </tr> <tr> <td>Flags</td> <td><code>3 lsb msb</code></td> <td>Set I2C flags to <code>lsb + (msb &lt;<!-- -->&lt; 8)</code></td> </tr> <tr> <td>Read</td> <td><code>4 P</code></td> <td>Read <code>P</code> bytes of data</td> </tr> <tr> <td>Write</td> <td><code>5 P ...</code></td> <td>Write <code>P</code> bytes of data</td> </tr> </tbody> </table>

The address, read, and write commands take a parameter `P`<!-- -->. Normally `P` is one byte (0-0xFF). If the command is preceded by the Escape command then `P` is two bytes (0-0xFFFF, least significant byte first).

The address defaults to that associated with the handle. The flags default to 0. The address and flags maintain their previous value until updated.

The returned I2C data is stored in consecutive locations of the returned buffer.

